# Документация API

## Wildberries API

**Документация:** 
- https://dev.wildberries.ru/ru/openapi/wbd
- https://dev.wildberries.ru/openapi/work-with-products/

### Основные endpoints:

#### 1. Получение списка товаров (Suppliers API)
- **Base URL:** `https://suppliers-api.wildberries.ru`
- **Endpoint:** `/content/v1/cards/cursor/list`
- **Метод:** POST
- **Описание:** Получение списка товаров из кабинета продавца
- **Параметры:**
  - `limit`: Количество товаров (макс 1000)
  - `offset`: Смещение для пагинации
- **Авторизация:** API ключ в заголовке `Authorization`

#### 2. ⭐ ОСНОВНОЙ ЭНДПОИНТ: Получение цен по артикулам (Discounts-Prices API)
- **Base URL:** `https://discounts-prices-api.wildberries.ru`
- **Endpoint:** `/api/v2/list/goods/filter` ⭐ **ЗАКРЕПЛЁН ДЛЯ MVP**
- **Метод:** POST
- **Описание:** Получение информации о товарах по артикулам, включая цены, валюту, общие скидки и скидки WB Клуба
- **Параметры:**
  - `vendorCodes`: Массив артикулов (до 100 за запрос)
- **Авторизация:** API ключ в заголовке `Authorization`
- **ИСТОЧНИК АРТИКУЛОВ:** Артикулы всех товаров WB берутся из файла `Articles.xlsx`

#### 3. Получение цен по nm_id (Discounts-Prices API)
- **Base URL:** `https://discounts-prices-api.wildberries.ru`
- **Endpoint:** `/api/v2/list/goods/size/nm`
- **Метод:** GET
- **Описание:** Получение информации обо всех размерах товара, включая цены, валюту, общие скидки и скидки для WB Клуба
- **Параметры:**
  - `nm`: Номенклатура товара (nm_id)
- **Авторизация:** API ключ в заголовке `Authorization`

### Примечания:
- API ключ передаётся в заголовке `Authorization`
- Для получения цен используется отдельный базовый URL: `discounts-prices-api.wildberries.ru`
- Лимит запросов: до 10 запросов за 6 секунд

## Ozon API

**Документация:** https://docs.ozon.ru/api/seller/

### Основные endpoints:

#### 1. Получение списка товаров (для сбора артикулов)
- **Base URL:** `https://api-seller.ozon.ru`
- **Endpoint:** `/v1/report/products/create` или `/v2/product/info/list` (требует уточнения)
- **Метод:** POST
- **Описание:** Получение списка товаров из кабинета продавца для извлечения артикулов (offer_id)
- **Параметры:**
  - `limit`: Количество товаров (макс 1000)
  - `last_id`: ID последнего товара для пагинации
- **Авторизация:** 
  - `Client-Id`: Client ID в заголовке
  - `Api-Key`: API ключ в заголовке
- **ИСПОЛЬЗОВАНИЕ:** Артикулы собираются из всех 3 кабинетов Ozon и записываются в `Articles.xlsx` на новый лист "OzonArticles"

#### 2. Получение цен товаров
- **Base URL:** `https://api-seller.ozon.ru`
- **Endpoint:** `/v4/product/info/prices`
- **Метод:** POST
- **Описание:** Получение информации о ценах товаров, включая текущую цену, скидки и другие параметры
- **Параметры:**
  - `product_id`: Массив ID товаров
  - `offer_id`: Массив артикулов (альтернатива product_id)
- **Авторизация:** 
  - `Client-Id`: Client ID в заголовке
  - `Api-Key`: API ключ в заголовке

### Примечания:
- Ozon использует API ключ и Client ID для авторизации
- Оба параметра передаются в заголовках запроса
- С 12 ноября 2025 года параметр `marketing_price` отключён в API
- Для получения актуальной цены используется `/v4/product/info/prices`

## Реализовано:

✅ Структура API клиентов для WB и Ozon
✅ Endpoints для получения списка товаров
✅ Endpoints для получения цен
✅ Обработка ошибок и логирование
✅ Поддержка батч-запросов

## Следующие шаги:

1. Протестировать API с реальными ключами
2. Уточнить структуру ответов API
3. Реализовать обработку полученных данных
4. Добавить кэширование и оптимизацию запросов

